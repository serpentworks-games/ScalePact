[gd_scene load_steps=10 format=3 uid="uid://cy5lmq1djweto"]

[ext_resource type="Script" path="res://Scripts/Enemies/StateMachine/EnemyStateMachine.cs" id="1_3u8xu"]
[ext_resource type="Script" path="res://Scripts/Utilities/EnemyEntityAccessor.cs" id="1_eyhau"]
[ext_resource type="AnimationLibrary" uid="uid://beh47qlnu58iu" path="res://Animations/Humanoid/TEMP_EnemyAnimLibrary.res" id="2_bhjmh"]
[ext_resource type="Script" path="res://Scripts/Enemies/StateMachine/EnemyMoveState.cs" id="2_fdovl"]
[ext_resource type="PackedScene" uid="uid://bbf6ttwtueode" path="res://Art/_Enemies_TEMP/SM_Prop_SwordOrnate_01.fbx" id="2_vq338"]
[ext_resource type="PackedScene" uid="uid://bvdaqn11tg0jw" path="res://Art/NPCRig.fbx" id="2_w1h0a"]
[ext_resource type="PackedScene" uid="uid://iifdnv8gbmhw" path="res://GameObjects/HealthComponent.tscn" id="5_r4olu"]
[ext_resource type="PackedScene" uid="uid://c1w3jx48j7ywr" path="res://GameObjects/MeleeAttackCast.tscn" id="6_4qhwj"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_pqwom"]
radius = 0.357833

[node name="Enemy" type="CharacterBody3D" node_paths=PackedStringArray("StateMachine", "HealthComponent")]
collision_layer = 9
script = ExtResource("1_eyhau")
StateMachine = NodePath("StateMachine")
HealthComponent = NodePath("HealthComponent")

[node name="StateMachine" type="Node" parent="."]
script = ExtResource("1_3u8xu")
MaxHealth = 7.0

[node name="MoveState" type="Node" parent="StateMachine"]
script = ExtResource("2_fdovl")

[node name="HealthComponent" parent="." instance=ExtResource("5_r4olu")]

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
shape = SubResource("CapsuleShape3D_pqwom")

[node name="RigPivot" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -1, 0)

[node name="NPCRig" parent="RigPivot" instance=ExtResource("2_w1h0a")]

[node name="GeneralSkeleton" parent="RigPivot/NPCRig" index="0"]
bones/1/position = Vector3(0, 0.876276, 0)
bones/2/position = Vector3(2.30777e-17, 0.102766, -0.0155288)
bones/2/rotation = Quaternion(0.108916, 0.0173303, -0.00639823, 0.993879)
bones/2/scale = Vector3(1, 1, 0.999999)
bones/3/rotation = Quaternion(-1.49012e-08, -1.49012e-08, -1.49012e-08, 1)
bones/4/rotation = Quaternion(8.9407e-08, 0, 0, 1)
bones/5/position = Vector3(-6.90113e-18, 0.111566, 0.0084994)
bones/5/rotation = Quaternion(-0.054588, -0.0097325, -0.00812557, 0.998428)
bones/6/position = Vector3(-4.03321e-17, 0.1201, 0.0193233)
bones/6/rotation = Quaternion(-0.0545884, -0.0097326, -0.00812548, 0.998428)
bones/6/scale = Vector3(0.999999, 1, 1)
bones/7/position = Vector3(-5.39264e-17, 0.094476, 0.122722)
bones/7/rotation = Quaternion(1.34111e-07, 1.61655e-16, 3.16268e-16, 1)
bones/7/scale = Vector3(1, 0.999999, 1)
bones/8/position = Vector3(-7.88846e-17, 0.127669, 0.122722)
bones/8/rotation = Quaternion(1.34111e-07, 1.61655e-16, 3.16268e-16, 1)
bones/8/scale = Vector3(1, 0.999999, 1)
bones/9/rotation = Quaternion(5.96046e-08, 1.49012e-08, 2.98023e-08, 1)
bones/11/rotation = Quaternion(0, 0.707107, 2.10734e-08, 0.707107)
bones/12/rotation = Quaternion(1.65138e-09, 0.707107, 1.65138e-09, 0.707107)
bones/15/position = Vector3(0.0566557, -1.4773e-09, -2.06057e-13)
bones/15/rotation = Quaternion(-0.0364033, 0.152035, 0.229995, 0.960553)
bones/15/scale = Vector3(1, 1, 1)
bones/16/rotation = Quaternion(0, -2.98023e-08, 5.96047e-08, 1)
bones/17/rotation = Quaternion(-0.415217, -0.572359, 0.47558, 0.523281)
bones/18/rotation = Quaternion(-0.00691221, 0.0257175, -0.0570025, 0.998019)
bones/19/position = Vector3(0.0377979, 5.83256e-10, 7.04015e-10)
bones/19/rotation = Quaternion(-0.00451965, 0.0280399, 0.159068, 0.986859)
bones/19/scale = Vector3(1, 1, 1)
bones/20/rotation = Quaternion(-0.214187, 0.673887, 0.214187, 0.673887)
bones/21/rotation = Quaternion(0.614485, 0.718439, 0.247717, -0.211873)
bones/23/position = Vector3(0.0300324, -1.55218e-09, 4.47244e-10)
bones/23/rotation = Quaternion(0.0166464, -0.0965254, 0.16913, 0.980714)
bones/23/scale = Vector3(1, 1, 1)
bones/24/position = Vector3(-0.0129954, 0.0473564, 0.041616)
bones/24/rotation = Quaternion(0.5, 0.5, 0.5, 0.5)
bones/25/rotation = Quaternion(2.98023e-08, 0, -1.49012e-08, 1)
bones/28/rotation = Quaternion(3.50095e-09, -0.707107, -3.50095e-09, 0.707107)
bones/29/rotation = Quaternion(-0.396606, 0.585409, 0.647968, -0.283086)
bones/31/position = Vector3(-0.0566551, 9.58222e-08, -2.01107e-07)
bones/31/rotation = Quaternion(-0.0364033, 0.152035, 0.229995, 0.960553)
bones/31/scale = Vector3(1, 1, 1)
bones/32/rotation = Quaternion(2.98023e-08, 2.98023e-08, 0, 1)
bones/33/rotation = Quaternion(-0.523281, 0.475581, 0.572359, -0.415217)
bones/35/position = Vector3(-0.0377933, -5.26601e-06, -1.54933e-07)
bones/35/rotation = Quaternion(-0.00451965, 0.0280399, 0.159068, 0.986859)
bones/35/scale = Vector3(1, 1, 1)
bones/36/rotation = Quaternion(-0.214187, -0.673887, -0.214187, 0.673887)
bones/37/rotation = Quaternion(0.211873, 0.247717, -0.718439, 0.614485)
bones/39/position = Vector3(-0.0300311, 1.13375e-06, 3.54188e-07)
bones/39/rotation = Quaternion(0.0166464, -0.0965253, 0.16913, 0.980714)
bones/39/scale = Vector3(1, 1, 1)
bones/40/position = Vector3(0.0744716, -1.39211, -0.0135382)
bones/40/rotation = Quaternion(0.97027, 0.00629899, 0.241938, 0.00157052)
bones/41/position = Vector3(0.00346232, -0.0471491, -0.127307)
bones/41/rotation = Quaternion(9.31323e-08, 1.92997e-08, -1.13331e-08, 1)
bones/42/position = Vector3(-1.0443e-14, -1.33745, 0.0326621)
bones/42/rotation = Quaternion(9.31323e-08, 1.92997e-08, -1.13331e-08, 1)
bones/43/rotation = Quaternion(-1.49012e-08, 4.47035e-08, 1, 4.47035e-08)
bones/44/rotation = Quaternion(5.96047e-08, 1, -2.05877e-08, -7.2066e-08)
bones/45/rotation = Quaternion(3.16101e-08, 0.707107, -0.707107, 1.05367e-08)
bones/46/position = Vector3(1.17702e-08, 0.0963863, -0.0586739)
bones/46/rotation = Quaternion(-0.0383212, 0.0110214, 0.0302696, 0.998746)
bones/47/position = Vector3(9.60948e-09, 0.0729576, 1.30458e-08)
bones/47/rotation = Quaternion(-3.88975e-08, 1, -2.98023e-08, 3.24936e-09)
bones/48/rotation = Quaternion(2.98023e-08, 1.49012e-08, 1, -1.49012e-08)
bones/49/rotation = Quaternion(-2.98023e-08, 1, -5.1831e-09, 5.77857e-08)
bones/50/rotation = Quaternion(-1.05367e-07, 0.707107, -0.707107, 2.10734e-08)
bones/51/position = Vector3(1.68145e-08, 0.0963863, -0.0586739)
bones/51/rotation = Quaternion(0.175058, -0.139667, 0.0344822, 0.973991)
bones/52/position = Vector3(1.21127e-08, 0.0729575, 1.30458e-08)
bones/52/rotation = Quaternion(-1.80651e-08, 1, 0, 1.80651e-08)
bones/53/rotation = Quaternion(-5.21541e-08, 2.12312e-08, -2.46804e-08, 1)
bones/54/position = Vector3(0.202781, -0.0995453, -0.0171593)
bones/54/rotation = Quaternion(-5.21541e-08, 2.12312e-08, -2.46804e-08, 1)
bones/55/rotation = Quaternion(0.227152, 0.131925, -0.615502, 0.743071)
bones/56/position = Vector3(-0.0231286, -0.94184, -0.0497769)
bones/56/rotation = Quaternion(0.0246604, 0, 0, 0.999696)
bones/57/position = Vector3(-0.192773, 0.053288, 0.00871111)
bones/57/rotation = Quaternion(-7.58915e-08, -0.726245, 1.00649e-08, 0.687436)
bones/58/rotation = Quaternion(0.140247, 0.554267, 0.252432, 0.780639)
bones/59/position = Vector3(0.211824, 0.0077751, 0.00491944)
bones/59/rotation = Quaternion(-5.21541e-08, 2.12312e-08, -2.46804e-08, 1)
bones/60/position = Vector3(-0.207847, 0.00376154, 0.00931909)
bones/60/rotation = Quaternion(-5.21541e-08, 2.12312e-08, -2.46804e-08, 1)

[node name="Item_WarriorSholderArmor" parent="RigPivot/NPCRig/GeneralSkeleton" index="0"]
transform = Transform3D(0.999318, 0.0164932, 0.0330547, -0.00894302, 0.976192, -0.216721, -0.0358422, 0.216277, 0.975673, 0.244137, 1.42904, 0.0291218)
visible = false
bone_idx = 24

[node name="Item_WarriorSholderArmor1" parent="RigPivot/NPCRig/GeneralSkeleton" index="1"]
transform = Transform3D(0.897983, -0.00483474, 0.440005, -0.0969651, -0.977534, 0.18715, 0.429214, -0.210723, -0.878276, -0.0156343, 0.0199422, -0.212123)
visible = false
bone_idx = 40

[node name="Item_Sword" parent="RigPivot/NPCRig/GeneralSkeleton" index="2"]
transform = Transform3D(0.999318, 0.0164933, 0.0330547, -0.00894309, 0.976192, -0.216721, -0.0358422, 0.216277, 0.975673, 0.00381912, 1.31416, -0.0892625)
visible = false
bone_idx = 41

[node name="Item_SwordHolder" parent="RigPivot/NPCRig/GeneralSkeleton" index="3"]
transform = Transform3D(0.999318, 0.0164933, 0.0330547, -0.00894309, 0.976192, -0.216721, -0.0358422, 0.216277, 0.975673, -0.0156344, 0.0199385, -0.212123)
visible = false
bone_idx = 42

[node name="Item_WaterCanteen" parent="RigPivot/NPCRig/GeneralSkeleton" index="4"]
transform = Transform3D(1, 4.93608e-08, 4.24624e-08, -4.93608e-08, 1, 1.04308e-07, -4.24624e-08, -1.04308e-07, 1, -0.201144, 0.925973, 0.00419175)
visible = false
bone_idx = 53

[node name="Item_WaterBladder_01" parent="RigPivot/NPCRig/GeneralSkeleton" index="5"]
transform = Transform3D(1, 4.93608e-08, 4.24624e-08, -4.93608e-08, 1, 1.04308e-07, -4.24624e-08, -1.04308e-07, 1, 0.202781, 0.776731, -0.0171593)
visible = false
bone_idx = 54

[node name="SM_Prop_SpellBook_03" parent="RigPivot/NPCRig/GeneralSkeleton" index="6"]
transform = Transform3D(0.207506, 0.974658, -0.0835658, -0.85479, 0.139118, -0.499981, -0.475685, 0.17518, 0.861996, 0.214467, 0.981819, -0.0215693)
visible = false
bone_idx = 55

[node name="Item_Pouch" parent="RigPivot/NPCRig/GeneralSkeleton" index="7"]
transform = Transform3D(1.05988, 0, 0, 0, 1.05859, -0.0522581, 0, 0.0522581, 1.05859, -0.0231286, -0.065564, -0.0497769)
visible = false
bone_idx = 56

[node name="SM_Prop_Vials" parent="RigPivot/NPCRig/GeneralSkeleton" index="8"]
transform = Transform3D(-0.0548636, 9.63937e-08, -0.998494, 1.2407e-07, 1, 8.97219e-08, 0.998494, -1.1896e-07, -0.0548636, -0.192773, 0.929564, 0.00871111)
visible = false
bone_idx = 57

[node name="Item_SwordSheath" parent="RigPivot/NPCRig/GeneralSkeleton" index="9"]
transform = Transform3D(0.258133, -0.238648, 0.93617, 0.549585, 0.833218, 0.0608649, -0.794559, 0.498794, 0.346238, 0.244742, 0.763295, -0.0651505)
visible = false
bone_idx = 58

[node name="Item_Dagger" parent="RigPivot/NPCRig/GeneralSkeleton" index="10"]
transform = Transform3D(1, 4.93608e-08, 4.24624e-08, -4.93608e-08, 1, 1.04308e-07, -4.24624e-08, -1.04308e-07, 1, 0.211824, 0.884051, 0.00491944)
visible = false
bone_idx = 59

[node name="Item_CoinBag" parent="RigPivot/NPCRig/GeneralSkeleton" index="11"]
transform = Transform3D(1, 4.93608e-08, 4.24624e-08, -4.93608e-08, 1, 1.04308e-07, -4.24624e-08, -1.04308e-07, 1, -0.207847, 0.880038, 0.00931909)
visible = false
bone_idx = 60

[node name="Character_Female_Witch" parent="RigPivot/NPCRig/GeneralSkeleton" index="12"]
visible = false

[node name="Character_Female_Queen" parent="RigPivot/NPCRig/GeneralSkeleton" index="13"]
visible = false

[node name="Character_Female_Druid" parent="RigPivot/NPCRig/GeneralSkeleton" index="14"]
visible = false

[node name="Character_Female_Gypsy" parent="RigPivot/NPCRig/GeneralSkeleton" index="15"]
visible = false

[node name="Character_Female_Peasant_01" parent="RigPivot/NPCRig/GeneralSkeleton" index="16"]
visible = false

[node name="Character_Female_Peasant_02" parent="RigPivot/NPCRig/GeneralSkeleton" index="17"]
visible = false

[node name="Character_Male_Baird" parent="RigPivot/NPCRig/GeneralSkeleton" index="18"]
visible = false

[node name="Character_Male_Sorcerer" parent="RigPivot/NPCRig/GeneralSkeleton" index="19"]
visible = false

[node name="Character_Male_King" parent="RigPivot/NPCRig/GeneralSkeleton" index="20"]
visible = false

[node name="Character_Male_Rouge_01" parent="RigPivot/NPCRig/GeneralSkeleton" index="22"]
visible = false

[node name="Character_Male_Wizard" parent="RigPivot/NPCRig/GeneralSkeleton" index="23"]
visible = false

[node name="AnimationPlayer" parent="RigPivot/NPCRig" index="1"]
libraries = {
"TEMP_EnemyAnimLibrary": ExtResource("2_bhjmh")
}

[node name="RightHandAttachment" type="BoneAttachment3D" parent="RigPivot"]
transform = Transform3D(0.0330547, -0.999317, -0.0164933, -0.216721, 0.00894311, -0.976193, 0.975673, 0.0358422, -0.216277, -0.793404, 1.36304, 0.0775359)
bone_name = "RightHand"
bone_idx = 28
use_external_skeleton = true
external_skeleton = NodePath("../NPCRig/GeneralSkeleton")

[node name="WeaponSlot" type="Node3D" parent="RigPivot/RightHandAttachment"]
transform = Transform3D(0.998604, -0.0369963, -0.0377162, 0.0394601, 0.996984, 0.0668198, 0.0351305, -0.0682148, 0.997052, -0.00729713, 0.0490943, 0.0338885)

[node name="SM_Prop_SwordOrnate_01" parent="RigPivot/RightHandAttachment/WeaponSlot" instance=ExtResource("2_vq338")]
transform = Transform3D(0.523173, 0.85195, 0.0217142, -0.736141, 0.438924, 0.515211, 0.429403, -0.285529, 0.856789, -0.00156301, 0.00976056, -0.00743541)

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
root_node = NodePath("../RigPivot/NPCRig")
libraries = {
"TEMP_EnemyAnimLibrary": ExtResource("2_bhjmh")
}

[node name="MeleeAttack" type="BoneAttachment3D" parent="."]
transform = Transform3D(0.0330547, -0.999317, -0.0164933, -0.216721, 0.00894311, -0.976193, 0.975673, 0.0358422, -0.216277, -0.793404, 0.363039, 0.0775359)
bone_name = "RightHand"
bone_idx = 28
use_external_skeleton = true
external_skeleton = NodePath("../RigPivot/NPCRig/GeneralSkeleton")

[node name="MeleeAttackCast" parent="MeleeAttack" instance=ExtResource("6_4qhwj")]
transform = Transform3D(0.509843, 0.844207, 0.165456, -0.849531, 0.463787, 0.251396, 0.135494, -0.268732, 0.953638, -0.00729715, 0.049094, 0.0338886)
target_position = Vector3(0, 1.25, 0)
collision_mask = 4
hit_from_inside = true

[connection signal="TriggerDefeat" from="HealthComponent" to="StateMachine" method="OnHealthComponentTriggerDefeat"]

[editable path="RigPivot/NPCRig"]
